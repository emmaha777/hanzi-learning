# 汉字记忆训练系统 (Hanzi SRS)

本项目是一个面向新手的汉字记忆练习小工具（遵循简单的记忆曲线）。  
功能核心：每日新字、按阶段复习（第2天/第3天/1周/2周/1月）、"学会了"库、**自动保存到浏览器本地存储**。

## ✨ 特性

- ✅ **自动保存**：每次操作后立即保存，每30秒自动保存，切换标签页时保存，页面关闭前保存
- ✅ **数据持久化**：数据保存在浏览器 localStorage，关闭页面后重新打开不会丢失
- ✅ **备份机制**：自动创建数据备份，防止数据丢失
- ✅ **错误恢复**：保存失败时自动重试，支持从备份恢复数据
- ✅ **可部署**：支持部署到 GitHub Pages、Vercel、Netlify 等平台

## 🚀 快速开始

### 本地运行

1. **安装 Node.js**（如果未安装）: https://nodejs.org/

2. **安装依赖**
   ```bash
   npm install
   ```

3. **启动开发服务器**
   ```bash
   # 方式一：使用 live-server（原有方式）
   npm start
   # 访问：http://localhost:3000/src/index.html
   
   # 方式二：使用 Vite（推荐，更快）
   npm run dev
   # 访问：http://localhost:3000
   ```

4. **访问应用**
   - 页面会自动在浏览器中打开
   - 或手动访问上述地址

⚠️ **重要提示**：
- 本地开发需要开发服务器运行
- 关闭 VSCode/Cursor 会停止服务器，网页无法访问
- **推荐部署到网络**（Vercel/GitHub Pages），这样就不需要本地服务器了
- 详细说明请查看 [LOCAL_ACCESS.md](./LOCAL_ACCESS.md)

### 构建生产版本

```bash
# 构建
npm run build

# 预览构建结果
npm run preview
```

构建后的文件在 `dist` 目录，可以直接部署到任何静态网站托管服务。

## 📦 数据持久化说明

### 数据保存机制

项目实现了多层数据保存机制，确保数据不会丢失：

1. **立即保存**：每次操作（学习、复习、设置等）后立即保存
2. **定期保存**：每30秒自动保存一次
3. **切换保存**：切换浏览器标签页时自动保存
4. **关闭保存**：页面关闭前自动保存
5. **备份机制**：同时保存主数据和备份数据

### 数据存储位置

- 数据保存在浏览器的 **localStorage** 中
- 存储键名：`cn_cards_v1`（主数据）和 `cn_cards_v1_backup`（备份）
- 设置保存在独立的 localStorage 键中

### 重要提示

- ✅ **同一浏览器、同一域名下，数据会持久保存**
- ⚠️ **不同浏览器之间数据不共享**
- ⚠️ **清除浏览器缓存会删除数据**（建议定期导出备份）
- ⚠️ **无痕模式下关闭窗口会删除数据**

## 🌐 部署到网络

项目已经配置好多种部署方式，详细说明请查看 [DEPLOY.md](./DEPLOY.md)

### 快速部署（推荐）

**Vercel（最简单）**：
1. 访问 [vercel.com](https://vercel.com)
2. 用 GitHub 账号登录
3. 导入你的仓库
4. 自动部署完成！

**GitHub Pages**：
1. 推送代码到 GitHub
2. 在仓库 Settings → Pages 中启用 GitHub Actions
3. 自动部署完成！

**Netlify**：
1. 访问 [netlify.com](https://netlify.com)
2. 导入 GitHub 仓库
3. 构建设置：`npm run build`，发布目录：`dist`
4. 部署完成！

更多部署选项和详细步骤，请查看 [DEPLOY.md](./DEPLOY.md)

## 📝 如何导入 500 个汉字

- **方法 A（推荐新手）**：打开页面后点击"导入汉字"，把 500 个汉字逐行粘贴进去。
- **方法 B（开发者方式）**：把汉字填入 `src/data.js` 的 `INITIAL_CHARS` 数组，然后刷新页面。

## 🔧 开发说明

### 项目结构

```
hanzi-learning/
├── src/
│   ├── index.html      # 主页面
│   ├── app.js          # 主应用逻辑
│   ├── data.js         # 默认字符数据
│   ├── utils.js        # 工具函数
│   └── styles.css      # 样式文件
├── dist/               # 构建输出目录（部署时使用）
├── vite.config.js      # Vite 配置
└── package.json        # 项目配置
```

### 技术栈

- 纯 JavaScript（无框架）
- Vite（构建工具）
- localStorage（数据存储）

## 🆘 常见问题

**Q: 关闭页面后数据会丢失吗？**  
A: 不会。数据自动保存到浏览器 localStorage，重新打开页面会自动加载。

**Q: 如何备份数据？**  
A: 可以在浏览器开发者工具（F12）→ Application → Local Storage 中查看和复制数据。

**Q: 可以多设备同步吗？**  
A: 当前版本不支持。如需多设备同步，需要添加后端服务（如 Firebase、Supabase）。

**Q: 部署后数据会丢失吗？**  
A: 不会。数据保存在用户的浏览器中，与部署无关。每个用户的数据都是独立的。

## 📚 后续扩展建议

- [ ] 添加数据导出/导入功能（JSON 文件）
- [ ] 添加多设备同步（Firebase / Supabase）
- [ ] 添加学习统计和进度可视化
- [ ] 增加拼音、语音、笔顺动画
- [ ] 优化移动端体验
- [ ] 添加暗色模式

## 📄 许可证

MIT License
