<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>汉字记忆训练</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header>
    <div class="header-left">
      <img src="./logo.png" alt="学习Logo" class="logo" id="logoImg" />
      <h1>汉字记忆训练</h1>
    </div>
    <div class="controls">
      <button id="randCheckBtn">抽查"学会了"<span id="randomCheckCount">5</span> 张</button>
      <button id="importBtn">导入汉字</button>
      <button id="exportBtn" style="background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);">导出数据</button>
      <button id="importDataBtn" style="background: linear-gradient(135deg, #2196F3 0%, #0b7dda 100%);">导入数据</button>
      <button id="settingsBtn">设置</button>
      <button id="resetBtn" style="background: linear-gradient(135deg, #ff4757 0%, #c44569 100%);">重置数据</button>
    </div>
  </header>

  <section class="panel section stats-section" style="margin-top:20px;padding:0">
    <div class="stats-container">
      <div class="stat-card stat-card-left">
        <div class="stat-icon stat-icon-calendar"></div>
        <div class="stat-label">今天是</div>
        <div class="stat-value" id="todayLabel"></div>
      </div>
      <div class="stat-card stat-card-right">
        <div class="stat-icon stat-icon-chart"></div>
        <div class="stat-label">今日总任务</div>
        <div class="stat-value-large" id="todayCount">0</div>
        <div class="stat-details">
          <span class="stat-detail-item">新字 <strong id="newCount">0</strong></span>
          <span class="stat-detail-item">复习 <strong id="reviewCount">0</strong></span>
        </div>
      </div>
      <div class="stat-card stat-card-learned">
        <div class="stat-icon stat-icon-star"></div>
        <div class="stat-label">已经学会了</div>
        <div class="stat-value-large" id="learnedCount">0</div>
        <button class="stat-view-btn" id="viewLearnedBtn">查看</button>
      </div>
    </div>
  </section>

  <section class="panel section">
    <h2 style="margin-bottom:20px;text-align:center;color:#8e44ad;">复习宝箱</h2>
    <div class="treasure-boxes">
      <button class="treasure-box boxBtn" data-stage="1" data-color="red">
        <img src="./assets/red_closed.png" alt="第二天复习" class="treasure-box-img treasure-box-closed" />
        <img src="./assets/red_open.png" alt="第二天复习" class="treasure-box-img treasure-box-open" style="display:none;" />
        <div class="treasure-box-label">第二天</div>
        <div class="treasure-box-count"><span id="count-s1">0</span></div>
      </button>
      <button class="treasure-box boxBtn" data-stage="2" data-color="pink">
        <img src="./assets/pink_closed.png" alt="第三天复习" class="treasure-box-img treasure-box-closed" />
        <img src="./assets/pink_open.png" alt="第三天复习" class="treasure-box-img treasure-box-open" style="display:none;" />
        <div class="treasure-box-label">第三天</div>
        <div class="treasure-box-count"><span id="count-s2">0</span></div>
      </button>
      <button class="treasure-box boxBtn" data-stage="3" data-color="purple">
        <img src="./assets/purple_closed.png" alt="一星期复习" class="treasure-box-img treasure-box-closed" />
        <img src="./assets/purple_open.png" alt="一星期复习" class="treasure-box-img treasure-box-open" style="display:none;" />
        <div class="treasure-box-label">一星期</div>
        <div class="treasure-box-count"><span id="count-s3">0</span></div>
      </button>
      <button class="treasure-box boxBtn" data-stage="4" data-color="blue">
        <img src="./assets/blue_closed.png" alt="两星期复习" class="treasure-box-img treasure-box-closed" />
        <img src="./assets/blue_open.png" alt="两星期复习" class="treasure-box-img treasure-box-open" style="display:none;" />
        <div class="treasure-box-label">两星期</div>
        <div class="treasure-box-count"><span id="count-s4">0</span></div>
      </button>
      <button class="treasure-box boxBtn" data-stage="5" data-color="turquoise">
        <img src="./assets/turquoise_closed.png" alt="一个月复习" class="treasure-box-img treasure-box-closed" />
        <img src="./assets/turquoise_open.png" alt="一个月复习" class="treasure-box-img treasure-box-open" style="display:none;" />
        <div class="treasure-box-label">一个月</div>
        <div class="treasure-box-count"><span id="count-s5">0</span></div>
      </button>
    </div>
    <div id="boxContent" style="margin-top:24px"></div>
  </section>

  <section class="panel section">
    <h2 style="margin-bottom:20px;text-align:center;color:#8e44ad;">今日新字</h2>
    <div class="grid" id="newCards"></div>
  </section>

  <div id="modalRoot" style="display:none"></div>

  <!-- 导入模态 -->
  <div id="importModal" style="display:none" class="overlay">
    <div class="modal">
      <h3>导入汉字（每行一个汉字）</h3>
      <div class="field"><textarea id="importArea" placeholder="例如：\n学\n习\n校"></textarea></div>
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button id="doImport">导入并保存</button>
        <button id="closeImport">取消</button>
      </div>
      <div class="small" style="margin-top:8px">提示：导入不会覆盖已存在汉字，会为新汉字创建学习条目。</div>
    </div>
  </div>

  <!-- 设置模态 -->
  <div id="settingsModal" style="display:none" class="overlay">
    <div class="modal">
      <h3>设置</h3>
      <div class="field">
        <label>每日新字上限：</label>
        <input id="inputDailyNew" type="number" min="1" max="20" value="4" />
      </div>
      <div class="field">
        <label>第二天复习每日上限：</label>
        <input id="inputStage1Limit" type="number" min="0" max="50" value="10" />
      </div>
      <div class="field">
        <label>第三天复习每日上限：</label>
        <input id="inputStage2Limit" type="number" min="0" max="50" value="10" />
      </div>
      <div class="field">
        <label>一星期复习每日上限：</label>
        <input id="inputStage3Limit" type="number" min="0" max="50" value="10" />
      </div>
      <div class="field">
        <label>两星期复习每日上限：</label>
        <input id="inputStage4Limit" type="number" min="0" max="50" value="10" />
      </div>
      <div class="field">
        <label>一个月复习每日上限：</label>
        <input id="inputStage5Limit" type="number" min="0" max="50" value="10" />
      </div>
      <div class="field">
        <label>抽查"学会了"数量：</label>
        <input id="inputRandomCheckLimit" type="number" min="1" max="20" value="5" />
      </div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:16px">
        <button id="saveSettings">保存</button>
        <button id="closeSettings">取消</button>
      </div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
